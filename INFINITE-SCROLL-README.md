# üé¨ Infinite Scroll Implementation

## ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

### üöÄ **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–∫—Ä–æ–ª–ª –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:**

- ‚úÖ **Popular Movies** (`/popular`) - —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ **Top Rated Movies** (`/top-rated`) - —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- ‚úÖ **Upcoming Movies** (`/upcoming`) - —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### üéØ **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

#### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞**

- üìã **Intersection Observer API** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
- üìã **Preload –∑–æ–Ω–∞ 100px** –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üìã **–î–µ–±–∞—É–Ω—Å –∑–∞—â–∏—Ç–∞** –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### **2. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π UX**

- üé® **Progress Bar** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üé® **Skeleton Loading** —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- üé® **Back to Top –∫–Ω–æ–ø–∫–∞** –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
- üé® **–°—á–µ—Ç—á–∏–∫ —Ñ–∏–ª—å–º–æ–≤** –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ (–ø–æ–∫–∞–∑–∞–Ω–æ X –∏–∑ Y —Ñ–∏–ª—å–º–æ–≤)

#### **3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

- ‚ö†Ô∏è **Retry –º–µ—Ö–∞–Ω–∏–∑–º** –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚ö†Ô∏è **User-friendly —Å–æ–æ–±—â–µ–Ω–∏—è** –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚ö†Ô∏è **Graceful fallback** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API

#### **4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

- ‚ö° **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ñ–∏–ª—å–º–æ–≤** (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π)
- ‚ö° **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚ö° **Minimal re-renders** —Å useRef –¥–ª—è —Ñ–ª–∞–≥–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚ö° **Intersection Observer cleanup** –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

```
src/components/
‚îú‚îÄ‚îÄ popular-movies-grid.tsx      # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è Popular
‚îú‚îÄ‚îÄ top-rated-movies-grid.tsx    # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è Top Rated
‚îú‚îÄ‚îÄ upcoming-movies-grid.tsx     # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è Upcoming
‚îú‚îÄ‚îÄ back-to-top.tsx             # –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–≤–µ—Ä—Ö
‚îî‚îÄ‚îÄ infinite-movie-grid.tsx     # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```

### **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

```typescript
// –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é fetch —Ñ—É–Ω–∫—Ü–∏—é:
async function fetchPopularMovies(page: number): Promise<MoviesResponse>;
async function fetchTopRatedMovies(page: number): Promise<MoviesResponse>;
async function fetchUpcomingMovies(page: number): Promise<MoviesResponse>;
```

### **State Management:**

```typescript
const [movies, setMovies] = useState<Movie[]>(initialMovies);
const [currentPage, setCurrentPage] = useState(initialPage);
const [totalPages, setTotalPages] = useState(initialTotalPages);
const [loading, setLoading] = useState(false);
const [error, setError] = useState<string | null>(null);
```

## üìä **TMDB API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ endpoint'—ã:**

- üé¨ `GET /movie/popular?page={page}` - Popular movies
- üé¨ `GET /movie/top_rated?page={page}` - Top rated movies
- üé¨ `GET /movie/upcoming?page={page}` - Upcoming movies

### **–õ–∏–º–∏—Ç—ã API:**

- üìã **20 —Ñ–∏–ª—å–º–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ)
- üìã **–î–æ 1000 —Å—Ç—Ä–∞–Ω–∏—Ü** –Ω–∞ –∫–∞–∂–¥—ã–π endpoint
- üìã **~40 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥** (rate limiting)

## üé® **UI/UX –£–ª—É—á—à–µ–Ω–∏—è:**

### **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏:**

- üîÑ **Spinner** —Å —Ç–µ–∫—Å—Ç–æ–º "Loading more movies..."
- üîÑ **Skeleton –∫–∞—Ä—Ç–æ—á–∫–∏** (12 —à—Ç—É–∫) –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- üîÑ **Progress bar** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ X –∏–∑ Y)

### **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**

- üéØ **Back to Top** –∫–Ω–æ–ø–∫–∞ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ 300px —Å–∫—Ä–æ–ª–ª–∞)
- üéØ **Try Again** –∫–Ω–æ–ø–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- üéØ **–ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏** –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

### **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏:**

- ‚ÑπÔ∏è **–°—á–µ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- ‚ÑπÔ∏è **"You've seen all X movies"** –≤ –∫–æ–Ω—Ü–µ —Å–ø–∏—Å–∫–∞
- ‚ÑπÔ∏è **"Scroll down to load more"** –ø–æ–¥—Å–∫–∞–∑–∫–∞

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Intersection Observer:**

```typescript
const observer = new IntersectionObserver(
  (entries) => {
    if (entries[0].isIntersecting && !loading && currentPage < totalPages) {
      loadNextPage();
    }
  },
  {
    threshold: 0.1, // –¢—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏ 10% –≤–∏–¥–∏–º–æ—Å—Ç–∏
    rootMargin: "100px", // Preload –∑–∞ 100px –¥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  }
);
```

## üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **Virtual Scrolling** –¥–ª—è –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
2. **Caching** –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –≤ localStorage
3. **Search & Filter** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞
4. **PWA offline support** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
5. **Prefetch** —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Ñ–æ–Ω–µ

### **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- üìà **–†–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã preload –∑–æ–Ω—ã** (50px vs 100px vs 200px)
- üìà **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ skeleton –∫–∞—Ä—Ç–æ—á–µ–∫** (6 vs 12 vs 20)
- üìà **–ü–æ–∑–∏—Ü–∏—è progress bar** (–≤–µ—Ä—Ö vs –Ω–∏–∑)

## ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Å–∫—Ä–æ–ª–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö:

- **Popular Movies** - http://localhost:3000/popular
- **Top Rated Movies** - http://localhost:3000/top-rated
- **Upcoming Movies** - http://localhost:3000/upcoming

üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–Ω—ã–π UX —Å –ø–ª–∞–≤–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏!
